(e=>{"use strict";const t="unnamed",n=1e4,i=18e5;let s,o={},a=[];function r(e){return e>99?(e/1e3).toFixed(1)+" s":e>59900?(e/6e4).toFixed(1)+" m":e.toFixed(1)+" ms"}function u(e){let s,o,a,u,l,d,c,p,m=[],f=0,h=0,x=0,g="idle";function v(){c.querySelector(".passed").textContent=f,c.querySelector(".failed").textContent=h,c.querySelector(".skipped").textContent=x}"id"in(e="object"==typeof e?e:{})&&(s=e.id),o="name"in e?e.name:t,(c=document.createElement("div")).className="suite",(p=document.createElement("div")).className="header",c.appendChild(p),(p=document.createElement("div")).className="title",p.textContent=o,c.firstChild.appendChild(p),(p=document.createElement("div")).className="counters",p.innerHTML='<span class="passed">0</span> | <span class="failed">0</span> | <span class="skipped">0</span> of <span class="total">0</span>',c.firstChild.appendChild(p),(p=document.createElement("div")).className="duration",c.firstChild.appendChild(p),(p=document.createElement("div")).className="status "+g,c.firstChild.appendChild(p),Object.defineProperties(this,{id:{get:function(){return s}},name:{get:function(){return o}},view:{get:function(){return c}},addTest:{value:function(e,t){let s,o="bad parameters: must be 1 or 2 where the last one is a function";if(arguments.length<1||arguments.length>2)throw new Error(o);if(1===arguments.length&&(t=arguments[0],e={}),"function"!=typeof t)throw new Error(o);s=new function(e,t){let s,o,a,u,l,d,c,p,m,f,h,x,g="idle";s="id"in e?e.id:void 0,o="name"in e?e.name:"not descripted",a="boolean"==typeof e.async&&e.async,u="boolean"==typeof e.skip&&e.skip,l="number"==typeof e.ttl?e.ttl:a?i:n,(h=document.createElement("div")).className="test",(x=document.createElement("div")).className="title",x.textContent=o,h.appendChild(x),(x=document.createElement("div")).className="duration",h.appendChild(x),(x=document.createElement("div")).className="status "+g,x.onclick=function(){let e,t=h.querySelector(".message");"idle"!==g&&"running"!==g&&(t.offsetHeight>0?(t.classList.remove("scrollable"),t.style.maxHeight="0px"):(t.style.maxHeight="200px",t.addEventListener("transitionend",function e(){this.classList.add("scrollable"),this.removeEventListener("transitionend",e)}),d instanceof Error?(e=d.stack.replace(" at ","<br>"),t.innerHTML=e):t.textContent=d?d.toString():""))},h.appendChild(x),(x=document.createElement("div")).className="message",h.appendChild(x),Object.defineProperties(this,{id:{get:function(){return s}},name:{get:function(){return o}},async:{get:function(){return a}},skip:{get:function(){return u}},ttl:{get:function(){return l}},run:{value:function(){var e,n;function i(e,t){n&&clearInterval(n),m=performance.now(),d=t,g=e,f=m-p,h.querySelector(".status").className="status "+g,h.querySelector(".duration").textContent=r(f),h.querySelector(".message").classList.add(g)}return g="running",h.querySelector(".status").className="status "+g,c=new Date,p=performance.now(),u?(i("skipped",""),Promise.resolve()):((e=new Promise((e,i)=>{n=setTimeout(()=>{i(new Error("Timeout, have you forgotten to call pass/fail?"))},l),t(e,i)})).then(e=>{i("passed",e)},e=>{i("failed",e instanceof Error?e:new Error(e))}),e)}},status:{get:function(){return g}},message:{get:function(){return d}},startTime:{get:function(){return c}},duration:{get:function(){return f}},view:{get:function(){return h}}})}(e,t),c.appendChild(s.view),m.push(s)}},getTests:{value:function(){return m.slice(0)}},run:{value:function(){let e;return g="running",c.querySelector(".header > .status").className="status "+g,c.querySelector(".total").textContent=m.length,e=new Promise((e,t)=>{let n=Promise.resolve();a=new Date,u=performance.now(),function t(i){var s,o;i===m.length?n.then(function(){l=performance.now(),g=h>0?"failed":"passed",d=l-u,c.querySelector(".header > .status").className="status "+g,c.querySelector(".header > .duration").textContent=r(d),e()}):(s=m[i++],(o=s.run()).then(function(){"passed"===s.status?f++:"failed"===s.status?h++:"skipped"===s.status&&x++,v(),!s.async&&t(i)},function(){"passed"===s.status?f++:"failed"===s.status?h++:"skipped"===s.status&&x++,v(),!s.async&&t(i)}),s.async&&(n=n.then(()=>o),t(i)))}(0)})}},status:{get:function(){return g}},startTime:{get:function(){return a}},duration:{get:function(){return d}}})}e&&"object"==typeof e||(e={}),e.namespace&&"object"==typeof e.namespace||("object"!=typeof window.Utils&&Object.defineProperty(window,"Utils",{value:{}}),e.namespace=window.Utils),"configUrl"in e||(e.configUrl="config.js"),s=function(){let e,t,n,i,s,o,a,r,u,l="max";function d(e){let n=t.getElementsByClassName("minMaxToggle")[0];e||(e="min"===l?"max":"min"),"max"===e?(t.classList.remove("min"),t.classList.add("max"),n.textContent="▲",t.lastChild.style.display="block"):(t.classList.remove("max"),t.classList.add("min"),t.lastChild.style.display="none",n.textContent="▼"),l=e}return(e=document.createElement("style")).innerHTML+=".just-test-ui {position:fixed;top:50px;left:350px;background-color:#000;color:#fff;opacity:.7;font-size:20px;font-family:Courier;border-radius:5px;overflow:hidden;cursor:default;box-sizing:border-box;transition: width .2s, height .2s;z-index:99999;}",e.innerHTML+=".just-test-ui.max {height:800px;width:800px;}",e.innerHTML+=".just-test-ui.min {height:35px;width:180px;}",e.innerHTML+=".just-test-ui .title {position:absolute;font-family:Tahoma;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}",e.innerHTML+=".just-test-ui > .minMaxToggle {position:absolute;right:9px;top:3px;font:25px monospace;}",e.innerHTML+=".just-test-ui > .header {top:3px;height:40px;left:5px;right:40px;font-size:24px;color:#99f;}",e.innerHTML+=".just-test-ui > .content {position:absolute;top:40px;bottom:60px;width:100%;border-top:3px solid #99f;overflow-x:hidden;overflow-y:scroll;}",e.innerHTML+=".just-test-ui > .footer {position:absolute;bottom:0px;left:0px;width:100%;height:60px;padding:0px 5px;font-family:Tahoma;border-top:3px solid #99f;}",e.innerHTML+=".just-test-ui .suite {position:relative;width:100%;height:auto;margin:10px 0px 30px;}",e.innerHTML+=".just-test-ui .suite .header {position:relative;height:26px;margin:0px 5px;border-bottom:1px solid #555}",e.innerHTML+=".just-test-ui .suite .header > div {position:absolute;top:0px;}",e.innerHTML+=".just-test-ui .suite .header > .title {width:340px;}",e.innerHTML+=".just-test-ui .suite .header > .counters {left:350px;}",e.innerHTML+=".just-test-ui .suite .header > .status {right:0px;}",e.innerHTML+=".just-test-ui .scrollable {overflow-x:hidden;overflow-y:auto;}",e.innerHTML+=".just-test-ui .duration {right:100px;}",e.innerHTML+=".just-test-ui .running {color:#99f;}",e.innerHTML+=".just-test-ui .skipped {color:#666;}",e.innerHTML+=".just-test-ui .passed {color:#6f4;}",e.innerHTML+=".just-test-ui .failed {color:#f55;}",e.innerHTML+='.just-test-ui .status.idle:before {color:#fff;content:"idle";}',e.innerHTML+='.just-test-ui .status.running:before {content:"running";}',e.innerHTML+='.just-test-ui .status.skipped:before {content:"skipped";}',e.innerHTML+='.just-test-ui .status.passed:before {content:"passed";}',e.innerHTML+='.just-test-ui .status.failed:before {content:"failed";}',e.innerHTML+=".just-test-ui .test {position:relative;min-height:24px;margin:10px 5px 10px 30px;font-size:18px;overflow:hidden;}",e.innerHTML+=".just-test-ui .test > div {position:absolute;top:0px;}",e.innerHTML+=".just-test-ui .test > .title {left:3px;width:500px;}",e.innerHTML+=".just-test-ui .test > .status {right:3px;}",e.innerHTML+=".just-test-ui .test > .status.passed:hover, .just-test-ui .test > .status.failed:hover {border-bottom:1px solid #ccc;}",e.innerHTML+=".just-test-ui .test > .message {position:relative;margin:25px 0px 0px 40px;height:auto;max-height:0px;transition:max-height .2s;line-height:150%;}",document.body.appendChild(e),(t=document.createElement("div")).className="just-test-ui",(i=document.createElement("div")).className="header title",i.textContent="JustTest",i.onmousedown=function(e){u=document.onmousemove,s=e.clientX,o=e.clientY,a=t.offsetLeft,r=t.offsetTop,document.onmousemove=function(e){let n=r+e.clientY-o,i=a+e.clientX-s;n=n<0?0:n,i=i<0?0:i,n=document.documentElement.clientHeight-n-35<0?document.documentElement.clientHeight-35:n,i=document.documentElement.clientWidth-i-180<0?document.documentElement.clientWidth-180:i,t.style.top=n+"px",t.style.left=i+"px",e.preventDefault()},document.onmouseleave=document.onmouseup=function(){document.onmousemove=u}},t.appendChild(i),(i=document.createElement("div")).className="minMaxToggle",i.onclick=function(){d()},t.appendChild(i),(n=document.createElement("div")).className="content",t.appendChild(n),(i=document.createElement("div")).className="footer",i.textContent="Summary:",t.appendChild(i),d("max"),document.body.appendChild(t),{ui:t,appendSuiteView:function(e){n.appendChild(e)}}}(),Object.defineProperties(o,{createSuite:{value:function(e){var t=new u(e);return a.push(t),s.appendSuiteView(t.view),t}},View:{value:s}}),Object.defineProperty(e.namespace,"JustTest",{value:o})})();