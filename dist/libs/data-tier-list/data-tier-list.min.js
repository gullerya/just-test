const ITEMS_KEY=Symbol("data.tier.items.key");class DataTierItemTemplate extends HTMLTemplateElement{constructor(){super(),this[ITEMS_KEY]=[]}get items(){return this[ITEMS_KEY]}set items(t){if(!Array.isArray(t))return;this[ITEMS_KEY]=t;let e,a,i,r=this.parentNode,l=t.length;(i=(a=this.content.firstElementChild.dataset).dtListItemAid)||(i=(new Date).getTime(),a.dtListItemAid=i);let n=r.querySelectorAll('[data-dt-list-item-aid="'+i+'"]'),s=n.length;if(s>l)for(;s>l;)r.removeChild(n[--s]);s<l&&(e=DataTierItemTemplate.extractControllerParameters(this.dataset.tie),DataTierItemTemplate.insertNewContent(r,this,e,s,l))}static extractControllerParameters(t){let e;if(t&&(!(e=t.trim().split(/\s+=>\s+/))||2!==e.length))throw new Error("invalid DataTier configuration");return e}static insertNewContent(t,e,a,i,r){let l,n,s,m,d,o,p,c,h=null,T=i,u=a[0]+(a[0].indexOf(":")<0?":":".");for(n=e.content,o=(l=DataTierItemTemplate.prepareOptimizationMap(e)).index;T<r;T++){for(p=(s=n.cloneNode(!0)).querySelectorAll("*"),m=o.length;m--;)(c=p[d=o[m]]).dataset.tie=c.dataset.tie.replace(/item:/g,u+T+"."),c.dataset.tie=c.dataset.tie.replace(/item\s*=/g,u+T+"=");T===i?h=s:h.appendChild(s)}t.appendChild(h)}static prepareOptimizationMap(t){let e,a={index:[]},i=t.content.querySelectorAll("*"),r=i.length;for(;r--;)(e=i[r]).dataset&&"string"==typeof e.dataset.tie&&a.index.push(r);return a}}customElements.define("data-tier-item-template",DataTierItemTemplate,{extends:"template"});