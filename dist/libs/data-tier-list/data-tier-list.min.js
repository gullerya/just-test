const ITEMS_KEY=Symbol("data.tier.items.key");class DataTierItemTemplate extends HTMLTemplateElement{constructor(){super(),this[ITEMS_KEY]=[]}get items(){return this[ITEMS_KEY]}set items(t){if(!Array.isArray(t))return;this[ITEMS_KEY]=t;const e=this.parentNode,a=this.content.firstElementChild.dataset,i=t.length;let r,n;(n=a.dtListItemAid)||(n=(new Date).getTime(),a.dtListItemAid=n);const s=e.querySelectorAll('[data-dt-list-item-aid="'+n+'"]');let l=s.length;if(l>i)for(;l>i;)e.removeChild(s[--l]);l<i&&(r=DataTierItemTemplate.extractControllerParameters(this.dataset.tie),DataTierItemTemplate.insertNewContent(e,this,r,l,i))}static extractControllerParameters(t){let e;if(t&&(!(e=t.trim().split(/\s+=>\s+/))||2!==e.length))throw new Error("invalid DataTier configuration");return e}static insertNewContent(t,e,a,i,r){const n=a[0]+(a[0].indexOf(":")<0?":":"."),s=DataTierItemTemplate.prepareOptimizationMap(e).index,l=e.content;let m,o,d,p,c,h=null,T=i;for(;T<r;T++){for(p=(m=l.cloneNode(!0)).querySelectorAll("*"),o=s.length;o--;)(c=p[d=s[o]]).dataset.tie=c.dataset.tie.replace(/item:/g,n+T+"."),c.dataset.tie=c.dataset.tie.replace(/item\s*=/g,n+T+"=");T===i?h=m:h.appendChild(m)}t.appendChild(h)}static prepareOptimizationMap(t){const e={index:[]},a=t.content.querySelectorAll("*");let i,r=a.length;for(;r--;)(i=a[r]).dataset&&"string"==typeof i.dataset.tie&&e.index.push(r);return e}}customElements.get("data-tier-item-template")||customElements.define("data-tier-item-template",DataTierItemTemplate,{extends:"template"});